{% extends "main.html" %}
{% load static %}
{% block content %}
<!-- {% include "navbar.html" %} -->
<div class="container-fluid">
    <div class="row">
        <aside class="col-md-3 p-0">
            {% include "sidebar.html" %}
        </aside>

        <main class="col-md-9 pt-4">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h2>Dashboard</h2>
                <div>
                    <button class="btn btn-primary">Reports</button>
                    <button class="btn btn-secondary">Settings</button>
                </div>
            </div>

            <div class="row mb-4">
                <div class="col-xl-4 col-md-12 mb-4">
                    <div class="card border-0 shadow-lg">
                        <div class="card-body d-flex align-items-center justify-content-between">
                            <div class="icon-container bg-gradient-primary text-white rounded-circle me-4">
                                <i class="fa fa-users fa-3x"></i>
                            </div>
                            <div>
                                <h4 class="text-muted">Total Employees</h4>
                                <h2 class="h1 mb-0">{{ emp_count }}</h2>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xl-4 col-md-12 mb-4">
                    <div class="card border-0 shadow-lg">
                        <div class="card-body d-flex align-items-center justify-content-between">
                            <div class="icon-container bg-gradient-warning text-white rounded-circle me-4">
                                <i class="fa fa-user-clock fa-3x"></i>
                            </div>
                            <div>
                                <h4 class="text-muted">Leave</h4>
                                <h2 class="h1 mb-0">0</h2>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-xl-4 col-md-12 mb-4">
                    <div class="card border-0 shadow-lg">
                        <div class="card-body d-flex align-items-center justify-content-between">
                            <div class="icon-container bg-gradient-success text-white rounded-circle me-4">
                                <i class="fa fa-check-circle fa-3x"></i>
                            </div>
                            <div>
                                <h4 class="text-muted">Approved</h4>
                                <h2 class="h1 mb-0">0</h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mb-4">
                <div class="col-md-12">
                    <div class="card border-0 shadow-lg">
                        <div class="card-body">
                            <h4 class="text-primary text-center">Performance Metrics</h4>
                            <div class="row">
                                <div class="col-md-4 mb-4">
                                    <div class="card text-center border-0 shadow">
                                        <div class="card-body">
                                            <div class="icon-container bg-gradient-success text-white rounded-circle mb-3">
                                                <i class="fa fa-users fa-2x"></i>
                                            </div>
                                            <h5 class="text-success">Total Users</h5>
                                            <h2 class="h1">150</h2>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-4">
                                    <div class="card text-center border-0 shadow">
                                        <div class="card-body">
                                            <div class="icon-container bg-gradient-warning text-white rounded-circle mb-3">
                                                <i class="fa fa-user-clock fa-2x"></i>
                                            </div>
                                            <h5 class="text-warning">Active Sessions</h5>
                                            <h2 class="h1">75</h2>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-4">
                                    <div class="card text-center border-0 shadow">
                                        <div class="card-body">
                                            <div class="icon-container bg-gradient-danger text-white rounded-circle mb-3">
                                                <i class="fa fa-clock fa-2x"></i>
                                            </div>
                                            <h5 class="text-danger">Pending Approvals</h5>
                                            <h2 class="h1">5</h2>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center mt-4">
                                <button class="btn btn-primary" onclick="showMoreInfo()">View More Details</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mb-4">
                <div class="col-md-6 mb-4">
                    <div class="card border-0 shadow-lg">
                        <div class="card-body">
                            <h4 class="text-primary">Monthly Activities</h4>
                            <canvas id="barChart" height="400"></canvas>
                        </div>
                    </div>
                </div>

                <div class="col-md-6 mb-4">
                    <div class="card border-0 shadow-lg">
                        <div class="card-body">
                            <h4 class="text-primary">Status Overview</h4>
                            <canvas id="pieChart" height="400"></canvas>
                        </div>
                    </div>
                </div>
            </div>

<style>
    .icon-container {
        width: 70px;
        height: 70px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto;
    }
    .bg-gradient-success {
        background: linear-gradient(45deg, #28a745, #85e3b2);
    }
    .bg-gradient-warning {
        background: linear-gradient(45deg, #ffc107, #ffecb5);
    }
    .bg-gradient-danger {
        background: linear-gradient(45deg, #dc3545, #f8d7da);
    }
</style>

<script>
    function showMoreInfo() {
        alert("More details about performance metrics will be displayed here.");
    }
</script>
<style>
    .icon-container {
        width: 80px;
        height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
    }
    .bg-gradient-primary {
        background: linear-gradient(45deg, #1e90ff, #87cefa);
    }
    .bg-gradient-warning {
        background: linear-gradient(45deg, #ffcc00, #ffd700);
    }
    .bg-gradient-success {
        background: linear-gradient(45deg, #28a745, #85e3b2);
    }
    .bg-gradient-danger {
        background: linear-gradient(45deg, #dc3545, #f8d7da);
    }
    .card {
        transition: transform 0.3s, box-shadow 0.3s;
    }
    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
    }
</style>

<script src="{% static 'assets/vendors/chartjs/Chart.min.js' %}"></script>
<script>
    document.querySelectorAll('.card').forEach(card => {
        card.addEventListener('mouseenter', () => {
            card.style.transform = 'scale(1.05)';
        });

        card.addEventListener('mouseleave', () => {
            card.style.transform = 'scale(1)';
        });
    });

    // Bar Chart
    const ctxBar = document.getElementById('barChart').getContext('2d');
    const barChart = new Chart(ctxBar, {
        type: 'bar',
        data: {
            labels: ['January', 'February', 'March', 'April', 'May'],
            datasets: [{
                label: 'Activities',
                data: [12, 19, 3, 5, 2],
                backgroundColor: 'rgba(54, 162, 235, 0.6)',
                borderColor: 'rgba(54, 162, 235, 1)',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            scales: {
                y: {
                    beginAtZero: true
                }
            }
        }
    });

    // Pie Chart
    const ctxPie = document.getElementById('pieChart').getContext('2d');
    const pieChart = new Chart(ctxPie, {
        type: 'pie',
        data: {
            labels: ['Approved', 'Pending', 'Canceled'],
            datasets: [{
                label: 'Status Overview',
                data: [10, 5, 3],
                backgroundColor: [
                    'rgba(75, 192, 192, 0.6)',
                    'rgba(255, 206, 86, 0.6)',
                    'rgba(255, 99, 132, 0.6)',
                ],
                borderColor: [
                    'rgba(75, 192, 192, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(255, 99, 132, 1)',
                ],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true
        }
    });

    // Line Chart
    const ctxLine = document.getElementById('lineChart').getContext('2d');
    const lineChart = new Chart(ctxLine, {
        type: 'line',
        data: {
            labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
            datasets: [{
                label: 'Trend',
                data: [3, 15, 5, 10],
                fill: false,
                borderColor: 'rgba(75, 192, 192, 1)',
                tension: 0.1
            }]
        },
        options: {
            responsive: true
        }
    });
</script>
{% endblock %}
